/*
 * Display currently using GPIO and constantly redrawing the image
 * This is done this way because I'm hoping that the other parts
 * of the alarm clock will be set up with timers and shouldn't need
 * constant attnetion. I'll need to check how quickly the display has
 * to be refreshed to look good.
 */
// #include <time.h>
#include "display.h"
#define NUMBERS
#define CHARACTERS

uint8_t display_color = 0b011;

#ifdef NUMBERS
uint8_t half_number_masks[10][16][15] = {
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0}, 
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0}, 
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0}, 
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    } ,
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }
};
#endif

#ifdef LETTERS
uint8_t half_letter_masks[7][16][15] = {
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }
};
#endif

#ifdef CHARACTERS
uint8_t half_character_masks[][16][4] = {
    {
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0b111, 0b111},
        {0, 0, 0b111, 0b111},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0b111, 0b111},
        {0, 0, 0b111, 0b111},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
    }, {
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
    }
};
#endif

uint8_t image[ROWS][COLS] = {
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
    {0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111},
};


void setup_gpio (void) {
    // initially using gpioc because it doesn't have a handy table of alternate functions
    RCC->AHBENR |= RCC_AHBENR_GPIOCEN;
    // set pins 0-12 for output
    GPIOB->MODER &= ~(0b11111111111111111111111111);
    GPIOB->MODER |= 0b01010101010101010101010101;

    RCC->AHBENR |= RCC_AHBENR_GPIOBEN;
    GPIOB->MODER &= ~(0b11<<(2*4));
    EXTI->RTSR |= EXTI_RTSR_TR4;
    EXTI->IMR |= EXTI_IMR_MR4;
    NVIC->ISER[0] = 1<<EXTI4_15_IRQn;
}

// initially just using PC 0-12
// these can be different, this is just for testing currently
/*
 * bit:     12  11  10  9   8   7   6   5   4   3   2   1   0
 * purpose: OE  CLK LAT SE3 SE2 SE1 SE0 R2  G2  B2  R1  G1  B1
 */
/*
 * 1. Begin with OE, CLK, and LAT low.
 * 2. Initialize a private row counter N to 0.
 * 3. Set R1,G1,B1 to the desired color for row N, column 0.
 * 4. Set R2,G2,B2 to the desired color for row HEIGHT/2+N, column 0.
 * 5. Set CLK high, then low, to shift in the color bit.
 * 6. Repeat steps 3-5 WIDTH times for the remaining columns.
 * 7. Set OE high to disable the LEDs.
 * 8. Set LAT high, then low, to load the shift register contents into the LED outputs.
 * 9. Set ABC (or ABCD) to the current row number N.
 * 10. Set OE low to re-enable the LEDs.
 * 11. Increment the row counter N.
 * 12. Repeat steps 3-11 HEIGHT/2 times for the remaining rows.
 */

void draw (void) {
    GPIOC->BRR = (0b111111111111); // set all output pins to 0
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            GPIOC->BRR = 0b111111;      // clear all color data before setting new color values
            GPIOC->BSRR = image[i][j] & (display_color | (display_color<<3));

            GPIOC->BSRR = 1<<CLK;
            // nanosleep(5000);
            for(int x = 0; x<500; x+=83);
            GPIOC->BRR = 1<<CLK;
            for(int x = 0; x<500; x+=83);
            // nanosleep(5000);
        }
        // this may need some delay so the display actually has time to latch
        GPIOC->BSRR = 1<<OE;
        GPIOC->BSRR = 1<<LAT;
        GPIOC->BRR = 0b1111<<SE0;
        GPIOC->BSRR = (i<<SE0);
        GPIOC->BRR = 1<<LAT;
        GPIOC->BRR = 1<<OE;
    }
}

void set_display_time(int hr, int min){
    int h_tens = (hr / 10) % 10;
    int h_ones = hr % 10;
    int m_tens = (min / 10) % 10;
    int m_ones = min % 10;

    // with transitions
    // if (h_tens) {
    //     change_number(h_tens, 0, 0);
    // }
    // change_number(h_ones, 0, 15);
    // change_number(m_tens, 0, 34);
    // change_number(m_ones, 0, 49);
    
    // no transitions
    clear_char(0, 0);
    if (h_tens) {
        display_number(h_tens, 0, 0);
    }
    display_number(h_ones, 0, 15);
    display_number(m_tens, 0, 34);
    display_number(m_ones, 0, 49);
}

void set_display_date(int month, int day){
    int m_tens = (month / 10) % 10;
    int m_ones = month % 10;
    int d_tens = (day / 10) % 10;
    int d_ones = day % 10;

    // with transitions
    // if (h_tens) {
    //     change_number(h_tens, 0, 0);
    // }
    // change_number(h_ones, 0, 15);
    // change_number(m_tens, 0, 34);
    // change_number(m_ones, 0, 49);
    
    // no transitions
    clear_char(16, 0);
    if (m_tens) {
        display_number(m_tens, 16, 0);
    }
    display_number(m_ones, 16, 15);
    clear_char(16, 0);
    if (d_tens) {
        display_number(d_tens, 16, 34);
    }
    display_number(d_ones, 16, 49);
}

void display_dash() {
    for (int i = 0; i < 16; i++) {
        for(int j = 0; j < 5; j++) {
            set_pixel(half_character_masks[1][i][j], (i + 16), (j+30));
        }
    }
}

void clear_char(int row, int col){
    for (int i=0; i < 16; i++) {
        for (int j = 0; j<15; j++) {
            set_pixel(0, i + row, j + col);
        }
    }
}
void display_number (uint8_t index, int row, int col) {
    if (col >= COLS
        || col < 0
        || row >= (ROWS * 2)
        || row < 0
    ) {
        return;
    }
    if (index > 9 || index < 0) {
        return;
    }

    uint8_t pix;

    for (int i=0; i < 16; i++) {
        for (int j=0; j < 15; j++) {
            pix = half_number_masks[index][i][j];
            set_pixel((pix & display_color), (i + row), (j + col));
        }
    }
}

void display_colon(){
    for (int i = 0; i < 16; i++) {
        for(int j = 0; j < 5; j++) {
            set_pixel(half_character_masks[0][i][j], i, (j+30));
        }
    }
}

// The color sent should only use the 3 least significant bits
// this function handles shifting the color for the bottom rows
void set_pixel (uint8_t color, int row, int col) {
    if ((row >= (ROWS * 2))
        || (row < 0)
        || (col >= COLS)
        || (col < 0)
    ) {
        return;
    }

    uint8_t mask = 0b111;

    if (row >= ROWS) {
        row -= 16;
        color = color << 3;
        mask <<= 3;
    }
    image[row][col] &= ~mask;
    image[row][col] |= color;
}

uint8_t get_pixel (int row, int col){
    if ((row >= (ROWS * 2))
        || (row < 0)
        || (col >= COLS)
        || (col < 0)
    ) {
        return 0b1000000;
    }
    uint8_t pix;
    if(row >= ROWS) {
        pix = image[row - 16][col]>>3;
    } else {
        pix = image[row][col] & 0b111;
    }
    return pix;
}

void display_character (uint8_t character, int row, int col) {
    if (col >= COLS
        || col < 0
        || row >= (ROWS * 2)
        || row < 0
    ) {
        return;
    }

    int index;
    uint8_t pix;

    switch (character) {
    case 'A':
        index = 0;
        break;

    case 'D':
        index = 1;
        break;

    case 'E':
        index = 2;
        break;

    case 'I':
        index = 3;
        break;

    case 'M':
        index = 4;
        break;

    case 'S':
        index = 5;
        break;

    case 'T':
        index = 6;
        break;
    }

    for (int i=0; i < 16; i++) {
        for (int j=0; j < 15; j++) {
            pix = half_letter_masks[index][i][j];
            set_pixel((pix & display_color), (i + row), (j + col));
        }
    }
}

void change_number (uint8_t index, int row, int col) {
    if (col >= COLS
        || col < 0
        || row >= (ROWS * 2)
        || row < 0
    ) {
        return;
    }
    if (index > 9 || index < 0) {
        return;
    }
    int set_trans_pos = 0;
    int clr_trans_pos = 0;
    for(int i=0;i<65;i++){
        clr_trans_pos = clear_num_transition(index, clr_trans_pos, row, col);
        draw();
    }
    for (int i = 0; i < 61; i++) {
        set_trans_pos = set_num_transition(index, set_trans_pos, row, col);
        draw();
    }
}

void clear_row(int row) {
    if (row >= (ROWS * 2) || row < 0) {
        return;
    }


    for (int i=0; i < COLS; i++) {
        set_pixel(0, row, i);
    }
}

void clear_col(int col) {
    if (col >= COLS || col < 0) {
        return;
    }

    for (int i = 0; i < ROWS*2; i++) {
        set_pixel(0, i, col);
    }
}

int clear_num_transition(uint8_t character, int trans_pos, int row, int col) {
    if (col >= COLS
        || col < 0
        || row >= (ROWS * 2)
        || row < 0
    ) {
        return;
    }
    for (int i=0; i<15; i++) {
            // pix = half_number_masks[character][0][i];
            set_pixel(0, ((trans_pos / 4) + row), (i + col));
    }
    return trans_pos + 1;
}

int set_num_transition(uint8_t character, int trans_pos, int row, int col) {
    if (col >= COLS
        || col < 0
        || row >= (ROWS * 2)
        || row < 0
    ) {
        return;
    }
    uint8_t pix;
    for (int i=0; i < 16; i++) {
        pix = half_number_masks[character][i][trans_pos / 4];
        set_pixel((pix & display_color), (i + row), ((trans_pos / 4) + col));
    }
    return trans_pos + 1;
}

void clear_diamond() {
  int cur_col1 = 0;
  int cur_col2 = COLS - 1;
  int cur_row1 = 0;
  int cur_row2 = (ROWS*2) - 1;

  for (int i = 0;;i=(i+1)%15){

    if (i == 0) {
      clear_col(cur_col1++);
      clear_col(cur_col2--);
      clear_row(cur_row1++);
    }
    if (i == 1) {
      clear_col(cur_col1++);
      clear_col(cur_col2--);
      clear_row(cur_row2--);
    }
    draw();

    if(cur_col1 >= cur_col2) {
        return;
    }
  }
}

void clear_swirl(){
    for(int i=0; i<ROWS; i++){
        clear_row_right(i);
        clear_col_down(COLS - 1 - i);
        clear_row_left((ROWS*2) - 1 - i);
        clear_col_up(i);
    }
}

void set_swirl() {
    for(int i=0; i<ROWS; i++){
        set_row_right(i);
        set_col_down(COLS - 1 - i);
        set_row_left((ROWS*2) - 1 - i);
        set_col_up(i);
    }
}

void flip_swirl() {
    for(int i=0; i<ROWS; i++){
        flip_row_right(i);
        flip_col_down(COLS - 1 - i);
        flip_row_left((ROWS*2) - 1 - i);
        flip_col_up(i);
    }
}

// flip
void flip_row_right(int row){
    if(row < 0 || row >= (ROWS*2)) {
        return;
    }
    uint8_t pix;
    for (int i = 0; i < COLS; i++) {
        pix = get_pixel(row, i);
        set_pixel((pix^display_color), row, i);
        draw();
    }
}

void flip_col_down(int col) {
    if(col < 0 || col >= COLS){
        return;
    }

    uint8_t pix;
    for(int i=0; i<(ROWS*2);i++) {
        pix = get_pixel(i, col);
        set_pixel((pix^display_color), i, col);
        draw();
    }
}

void flip_row_left(int row){
    if(row < 0 || row >= (ROWS*2)) {
        return;
    }
    uint8_t pix;
    for (int i = COLS-1; i >= 0; i--) {
        pix = get_pixel(row, i);
        set_pixel((pix^display_color), row, i);
        draw();
    }
}

void flip_col_up(int col) {
    if(col < 0 || col >= COLS){
        return;
    }

    uint8_t pix;
    for(int i=(ROWS*2)-1; i>=0; i--) {
        pix = get_pixel(i, col);
        set_pixel((pix^display_color), i, col);
        draw();
    }
}

// clear
void clear_row_right(int row){
    if(row < 0 || row >= (ROWS*2)) {
        return;
    }
    for (int i = 0; i < COLS; i++) {
        set_pixel(0, row, i);
        draw();
    }
}

void clear_col_down(int col) {
    if(col < 0 || col >= COLS){
        return;
    }

    for(int i=0; i<(ROWS*2);i++) {
        set_pixel(0, i, col);
        draw();
    }
}

void clear_row_left(int row){
    if(row < 0 || row >= (ROWS*2)) {
        return;
    }
    for (int i = COLS-1; i >= 0; i--) {
        set_pixel(0, row, i);
        draw();
    }
}

void clear_col_up(int col) {
    if(col < 0 || col >= COLS){
        return;
    }

    for(int i=(ROWS*2)-1; i>=0; i--) {
        set_pixel(0, i, col);
        draw();
    }
}

// set
void set_row_right(int row){
    if(row < 0 || row >= (ROWS*2)) {
        return;
    }
    for (int i = 0; i < COLS; i++) {
        set_pixel(display_color, row, i);
        draw();
    }
}

void set_col_down(int col) {
    if(col < 0 || col >= COLS){
        return;
    }

    for(int i=0; i<(ROWS*2);i++) {
        set_pixel(display_color, i, col);
        draw();
    }
}

void set_row_left(int row){
    if(row < 0 || row >= (ROWS*2)) {
        return;
    }
    for (int i = COLS-1; i >= 0; i--) {
        set_pixel(display_color, row, i);
        draw();
    }
}

void set_col_up(int col) {
    if(col < 0 || col >= COLS){
        return;
    }

    for(int i=(ROWS*2)-1; i>=0; i--) {
        set_pixel(display_color, i, col);
        draw();
    }
}
