/*
 * Display currently using GPIO and constantly redrawing the image
 * This is done this way because I'm hoping that the other parts
 * of the alarm clock will be set up with timers and shouldn't need
 * constant attnetion. I'll need to check how quickly the display has
 * to be refreshed to look good.
 */
// #include <time.h>
#include "display.h"

char display_color = 0b110;

char test_image[ROWS][COLS] = {
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
    {63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63},
};

char half_number_masks[10][16][15] = {
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0}, 
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0}, 
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0}, 
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    },
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }
};

char half_letter_masks[7][16][15] = {
    {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0b111, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0},
        {0, 0, 0b111, 0b111, 0, 0, 0, 0, 0, 0, 0, 0b111, 0b111, 0, 0},
        {0, 0, 0, 0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }, {
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0b111, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0b111, 0, 0, 0, 0, 0, 0, 0},
        {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    }
};

char half_character_masks[][16][4] = {
    {
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0b111, 0b111},
        {0, 0, 0b111, 0b111},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0b111, 0b111},
        {0, 0, 0b111, 0b111},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
    }, {
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0b111, 0b111, 0b111},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
        {0, 0, 0, 0},
    }
};

char image[ROWS][COLS] = {
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
    {0b001001, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b111111, 0b100100},
};

void nanosleep(int nano_seconds) {
    asm(
        "   mov r0,%0\n"
        "repeat:\n"
        "   sub r0, #83\n"
        "   bgt nanosleep\n"
        "   bx lr\n"
        : : "r"(nano_seconds) : "r0", "cc");
}

void setup_gpio (void) {
    // initially using gpioc because it doesn't have a handy table of alternate functions
    RCC->AHBENR |= RCC_AHBENR_GPIOCEN;
    // set pins 0-12 for output
    for (int i = 0; i < 13; i++) {
        GPIOC->MODER &= ~(0b11 << (i * 2));
        GPIOC->MODER |= 0b01 << (i * 2);
    }
}

// initially just using PC 0-12
// these can be different, this is just for testing currently
/*
 * bit:     12  11  10  9   8   7   6   5   4   3   2   1   0
 * purpose: OE  CLK LAT SE3 SE2 SE1 SE0 R2  G2  B2  R1  G1  B1
 */
/*
 * 1. Begin with OE, CLK, and LAT low.
 * 2. Initialize a private row counter N to 0.
 * 3. Set R1,G1,B1 to the desired color for row N, column 0.
 * 4. Set R2,G2,B2 to the desired color for row HEIGHT/2+N, column 0.
 * 5. Set CLK high, then low, to shift in the color bit.
 * 6. Repeat steps 3-5 WIDTH times for the remaining columns.
 * 7. Set OE high to disable the LEDs.
 * 8. Set LAT high, then low, to load the shift register contents into the LED outputs.
 * 9. Set ABC (or ABCD) to the current row number N.
 * 10. Set OE low to re-enable the LEDs.
 * 11. Increment the row counter N.
 * 12. Repeat steps 3-11 HEIGHT/2 times for the remaining rows.
 */

void draw (void) {
    GPIOC->BRR = (0b111111111111); // set all output pins to 0
    for (int i = 0; i < ROWS; i++) {
        for (int j = 0; j < COLS; j++) {
            GPIOC->BRR = 0b111111;      // clear all color data before setting new color values
            GPIOC->BSRR = image[i][j] & 0b111111;

            GPIOC->BSRR = 1<<CLK;
            // nanosleep(5000);
            for(int x = 0; x<500; x+=83);
            GPIOC->BRR = 1<<CLK;
            for(int x = 0; x<500; x+=83);
            // nanosleep(5000);
        }
        // this may need some delay so the display actually has time to latch
        GPIOC->BSRR = 1<<OE;
        GPIOC->BSRR = 1<<LAT;
        GPIOC->BRR = 0b1111<<SE0;
        GPIOC->BSRR = (i<<SE0);
        GPIOC->BRR = 1<<LAT;
        GPIOC->BRR = 1<<OE;
    }
}

// The color sent should only use the 3 least significant bits
// this function handles shifting the color for the bottom rows
void set_pixel (int row, int column, char color) {
    if ((row >= (ROWS * 2))
        || (row < 0)
        || (column >= COLS)
        || (column < 0)
    ) {
        return;
    }

    if (row >= ROWS) {
        color = color << 3;
        image[row][column] &= ~((1<<R2) | (1<<G2) | (1<<B2));
    } else {
        image[row][column] &= ~((1<<R1) | (1<<G1) | (1<<B1));
    }
    image[row][column] |= color;
}

void display_char (char character, int col, int row) {
    if ((col + 15) >= COLS
        || col < 0
        || (row + 16) >= (ROWS * 2)
        || row < 0
    ) {
        return;
    }

    int num;
    char pix;

    switch (character) {
    case 'A':
        num = 0;
        break;

    case 'D':
        num = 1;
        break;

    case 'E':
        num = 2;
        break;

    case 'I':
        num = 3;
        break;

    case 'M':
        num = 4;
        break;

    case 'S':
        num = 5;
        break;

    case 'T':
        num = 6;
        break;
    }

    for (int i=0; i < 16; i++) {
        for (int j=0; j < 15; j++) {
            pix = half_character_masks[num][i][j];
            set_pixel((i + row), (j + col), (pix & display_color));
        }
    }
}

void display_number (char num, int col, int row) {
    if ((col + 15) >= COLS
        || col < 0
        || (row + 16) >= (ROWS * 2)
        || row < 0
    ) {
        return;
    }
    if (num > 9 || num < 0) {
        return;
    }

    char pix;

    for (int i=0; i < 16; i++) {
        for (int j=0; j < 15; j++) {
            pix = half_number_masks[num][i][j];
            set_pixel(i + row, j + col, (pix & display_color));
        }
    }
}
